language: rust
rust:
  - nightly
node_js:
  - node
cache:
  timeout: 360
  cargo: true
  yarn: true
  directories:
  - ui/node_modules
script:
  - (cd ui && yarn install && yarn run unit && yarn run build)
  - cargo build --verbose --all
  - cargo test --verbose --all
branches:
  only:
  - master
  - /^v\d+\.\d+\.\d+(-\S+)?$/
